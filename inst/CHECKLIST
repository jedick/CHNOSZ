****************************
Release checklist for CHNOSZ
    (updated 2020-07-06)
****************************

- Run examples() and demos() and inspect their output (especially plots)

- Install the package with --install-tests and run
  testthat::test_package("CHNOSZ", reporter = "progress") to:
  - run *all* tests (long ones are skipped under R CMD check --as-cran)
  - find warnings from tests that aren't shown in R CMD check

- Check that uniprot.aa() works with current UniProt web pages

- Check reverse dependencies on CRAN: canprot, ecipex, iemisc as of 2019-08-02

**********************
Updating data in OBIGT
**********************

- Add data to relevant csv file in extdata/OBIGT.

- Add bibtex references to vignettes/OBIGT.bib
  (used in the OBIGT.Rmd vignette).

- Add references *and notes* to extdata/OBIGT/refs.csv
  (also used in the OBIGT.Rmd vignette and thermo.refs()).

- Check output of demo/sources.R to make sure all references
  are cited (printed results should be character(0)).

- Rebuild extdata/thermo/stoich.csv.xz after all data updates
  (used in retrieve() to search the databse by element):
  formula <- thermo()$OBIGT$formula
  stoich <- i2A(formula)
  write.csv(stoich, "stoich.csv")
  system("xz -f stoich.csv")

- Rebuild extdata/adds/OBIGT_check.csv after all data updates:
  (not used elsewhere in CHNOSZ, but helpful to see which
  species data have self inconsistencies):
  co <- check.OBIGT()
  write.csv(co, "OBIGT_check.csv", row.names=FALSE, na="")

******************
Updating vignettes
******************

- Customize rmarkdown installation (in R local library)

  - to reduce size of vignettes: replace files in
    rmd/h/bootstrap/fonts/ with empty files

  - to enable offset anchor position in OBIGT.Rmd:
    remove padding-top: 10px; from h2 in
    rmarkdown/templates/html_vignette/resources/vignette.css

- vignettes/OBIGT.bib: check correct year and version for CHNOSZ reference

- Documentation links: after installation, run doc/mklinks.sh
  and put the modified anintro.html and OBIGT.html in the package

***************
R compatibility
***************

- Run R CMD check using R compiled without long doubles (emulating Solaris checks on CRAN)
  (CFLAGS=-ffloat-store ./configure --disable-long-double)

- Run R CMD check with Latin-1 locale (catches errors on CRAN's debian-clang)
  LC_CTYPE=en_US R CMD check CHNOSZ_x.x.x.tar.gz

- Backwards compatibility: build and check the package with the
  *minimum* R version (from the DESCRIPTION file)

*************
Documentation 
*************

- Update list of documentation topics in examples() with any new ones

- Ensure all Rd files have \concept{...} as listed in CHNOSZ-package.Rd

- Instead of \doi{...}, use \url{https://doi.org/...}. The \doi macro
  generates a large (ca. 265K) build/partial.rdb file (see WRE 1.3.2).

- Run R_PAPERSIZE=letter R CMD Rd2pdf chnosz/
  and fix any lines truncated by page margins
