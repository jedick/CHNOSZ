****************************
release checklist for CHNOSZ
    (updated 2020-07-04)
****************************

- run examples() and demos() and inspect their output (especially plots)

- use testthat::test_package("CHNOSZ", reporter = "progress") to find
  warnings from tests that aren't shown in R CMD check

- check that uniprot.aa() works with current UniProt web pages

- check reverse dependencies on CRAN: canprot, ecipex, iemisc as of 2019-08-02

**********************
updating data in OBIGT
**********************

- Add data to relevant csv file in extdata/OBIGT.

- Add bibtex references to vignettes/OBIGT.bib
  (used in the OBIGT.Rmd vignette).

- Add references *and notes* to extdata/OBIGT/refs.csv
  (also used in the OBIGT.Rmd vignette and thermo.refs()).

- Check output of demo/sources.R to make sure all references
  are cited (printed results should be character(0)).

- Rebuild extdata/thermo/stoich.csv.xz after all data updates
  (used in retrieve() to search the databse by element):
  formula <- thermo()$OBIGT$formula
  stoich <- i2A(formula)
  write.csv(stoich, "stoich.csv")
  system("xz -f stoich.csv")

- Rebuild extdata/adds/OBIGT_check.csv after all data updates:
  (not used elsewhere in CHNOSZ, but helpful to see which
  species data have self inconsistencies):
  co <- check.OBIGT()
  write.csv(co, "OBIGT_check.csv", row.names=FALSE, na="")

******************
updating vignettes
******************

- Customize rmarkdown installation (in R local library)

  - to reduce size of vignettes: replace files in
    rmd/h/bootstrap/fonts/ with empty files

  - to enable offset anchor position in OBIGT.Rmd:
    remove padding-top: 10px; from h2 in
    rmarkdown/templates/html_vignette/resources/vignette.css

- Build the package using both qpdf and ghostscript to compact vignettes:
  R CMD build --compact-vignettes=both chnosz/

- vignettes/OBIGT.bib: check correct year and version for CHNOSZ reference

- Documentation links: after installation, run doc/mklinks.sh
  and put the modified anintro.html and OBIGT.html in the package

***************
R compatibility
***************

- run R CMD check using R compiled without long doubles (emulating Solaris checks on CRAN)
  (CFLAGS=-ffloat-store ./configure --disable-long-double)

- run R CMD check with Latin-1 locale (catches errors on CRAN's debian-clang)
  LC_CTYPE=en_US R CMD check CHNOSZ_x.x.x.tar.gz

- backwards compatibility: build and check the package with the
  *minimum* R version (from the DESCRIPTION file)

*************
documentation 
*************

- update list of documentation topics in examples() with any new ones

- ensure all Rd files have \concept{...} as listed in CHNOSZ-package.Rd

- although Rd files could use the \doi macro, it generates a largish (ca. 265K)
  build/partial.rdb file; just use \url for now.

- run R_PAPERSIZE=letter R CMD Rd2pdf chnosz/
  and fix any lines truncated by page margins
